server_name: "owo.me"
pid_file: /data/homeserver.pid
listeners:
  - port: 8008
    tls: false
    type: http
    x_forwarded: true
    resources:
      - names: [client, federation]
        compress: false
  - port: 8000
    type: metrics
enable_metrics: true
database:
  name: psycopg2
  args:
    user: SECRET_database_user
    password: SECRET_database_password
    dbname: SECRET_database_name
    host: SECRET_database_host
    port: SECRET_database_port
log_config: "/config/log.yaml"
media_store_path: /data/media_store
registration_shared_secret: "SECRET_registration_shared_secret"
report_stats: false
macaroon_secret_key: "SECRET_macaroon_secret_key"
form_secret: "SECRET_form_secret"
signing_key_path: "/secrets/signing.key"
trusted_key_servers:
  - server_name: "matrix.org"
public_baseurl: https://matrix.owo.me
oidc_providers:
  - idp_id: keycloak
    idp_name: "genprog auth"
    issuer: "https://sso.generalprogramming.org/realms/master"
    client_id: matrix_synapse
    client_secret: SECRET_oidc_client_secret
    scopes: ["openid", "profile"]
    user_mapping_provider:
      config:
        localpart_template: "{{ user.preferred_username }}"
        display_name_template: "{{ user.preferred_username }}"
        email_template: "{{ user.email }}"
    backchannel_logout_enabled: true
password_config:
  enabled: false
ip_range_whitelist: []
allow_public_rooms_over_federation: true
