apiVersion: argoproj.io/v1alpha1
kind: Application
metadata:
  name: zot-registry
  namespace: argocd
spec:
  destination:
    namespace: zot-registry
    server: https://kubernetes.default.svc
  project: infra
  source:
    chart: zot
    helm:
      values: |-
        service:
          type: LoadBalancer
        persistence: true
        pvc:
          create: true
        configFiles:
          config.json: {{ .Files.Get "config.json" }}
    repoURL: http://zotregistry.io/helm-charts
    targetRevision: v0.1.26
  syncPolicy:
    automated:
      prune: true
